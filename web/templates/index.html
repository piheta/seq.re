<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>seq.re</title>
    <link rel="icon" type="image/webp" href="/static/favicon.webp">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/static/tailwind.config.js"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script src="/static/crypto.js"></script>
    <style>
        body {
            color-scheme: light;
            background-image: radial-gradient(#ffffff 15%, transparent 0);
            background-size: 30px 30px;
        }

        .dark body {
            color-scheme: dark !important;
            background-image: radial-gradient(#111415 15%, transparent 0);
        }
    </style>
</head>

<body class="min-h-screen py-8 px-4 bg-dr-bg-page dark:bg-dr-bg-page-dark text-dr-text dark:text-dr-text-dark">
    <div class="max-w-2xl mx-auto">
        <header class="mb-8 flex justify-between items-center">
            <h1 class="text-4xl text-dr-text-heading dark:text-dr-text-heading-dark">seq.re</h1>
            <button id="dark-mode-toggle" class="p-2 -mb-3 rounded-md bg-dr-bg-page dark:bg-dr-bg-page-dark"
                onclick="toggleDarkMode()" title="Toggle dark mode">
                <svg id="sun-icon" class="w-5 h-5 hidden text-dr-orange dark:text-dr-orange-dark" fill="none"
                    stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z">
                    </path>
                </svg>
                <svg id="moon-icon" class="w-5 h-5 text-dr-indigo dark:text-dr-indigo-dark" fill="none"
                    stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z">
                    </path>
                </svg>
            </button>
        </header>

        <!-- Tabs -->
        <div class="rounded-lg shadow-sm mb-6 p-2 bg-dr-bg dark:bg-dr-bg-dark">
            <div class="flex flex-wrap gap-1">
                <button hx-get="/tab/url" hx-target="#tab-content" hx-swap="innerHTML"
                    class="tab-button flex items-center justify-center gap-2 px-4 py-2 rounded-md flex-grow sm:flex-grow-0 bg-dr-bg-subtle dark:bg-dr-bg-subtle-dark text-dr-text-heading dark:text-dr-text-heading-dark hover:bg-dr-bg-gray dark:hover:bg-dr-bg-gray-dark"
                    onclick="setActiveTab(this)">
                    <svg class="w-4 h-4 text-dr-blue dark:text-dr-blue-light" fill="none" stroke="currentColor"
                        viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1">
                        </path>
                    </svg>
                    <span class="hidden sm:inline">URL Shortener</span>
                </button>
                <button hx-get="/tab/image" hx-target="#tab-content" hx-swap="innerHTML"
                    class="tab-button flex items-center justify-center gap-2 px-4 py-2 rounded-md flex-grow sm:flex-grow-0 text-dr-text-gray dark:text-dr-text-gray-light hover:bg-dr-bg-gray dark:hover:bg-dr-bg-gray-dark"
                    onclick="setActiveTab(this)">
                    <svg class="w-4 h-4 text-dr-green dark:text-dr-green-dark" fill="none" stroke="currentColor"
                        viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z">
                        </path>
                    </svg>
                    <span class="hidden sm:inline">Image Sharing</span>
                </button>
                <button hx-get="/tab/secret" hx-target="#tab-content" hx-swap="innerHTML"
                    class="tab-button flex items-center justify-center gap-2 px-4 py-2 rounded-md flex-grow sm:flex-grow-0 text-dr-text-gray dark:text-dr-text-gray-light hover:bg-dr-bg-gray dark:hover:bg-dr-bg-gray-dark"
                    onclick="setActiveTab(this)">
                    <svg class="w-4 h-4 text-dr-purple dark:text-dr-purple-dark" fill="none" stroke="currentColor"
                        viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z">
                        </path>
                    </svg>
                    <span class="hidden sm:inline">Secret Sharing</span>
                </button>
                <button hx-get="/tab/code" hx-target="#tab-content" hx-swap="innerHTML"
                    class="tab-button flex items-center justify-center gap-2 px-4 py-2 rounded-md flex-grow sm:flex-grow-0 text-dr-text-gray dark:text-dr-text-gray-light hover:bg-dr-bg-gray dark:hover:bg-dr-bg-gray-dark"
                    onclick="setActiveTab(this)">
                    <svg class="w-4 h-4 text-dr-orange dark:text-dr-orange-dark" fill="none" stroke="currentColor"
                        viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                    </svg>
                    <span class="hidden sm:inline">Code Sharing</span>
                </button>
                <button hx-get="/tab/ip" hx-target="#tab-content" hx-swap="innerHTML"
                    class="tab-button flex items-center justify-center gap-2 px-4 py-2 rounded-md flex-grow sm:flex-grow-0 text-dr-text-gray dark:text-dr-text-gray-light hover:bg-dr-bg-gray dark:hover:bg-dr-bg-gray-dark"
                    onclick="setActiveTab(this)">
                    <svg class="w-4 h-4 text-dr-indigo dark:text-dr-indigo-dark" fill="none" stroke="currentColor"
                        viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z">
                        </path>
                    </svg>
                    <span class="hidden sm:inline">IP Detection</span>
                </button>
            </div>
        </div>

        <!-- Tab Content -->
        <div class="rounded-lg shadow-sm p-6 bg-dr-bg dark:bg-dr-bg-dark" id="tab-content" hx-get="/tab/url"
            hx-trigger="load" hx-swap="innerHTML">
            <!-- Content will be loaded here -->
        </div>

        <footer class="mt-8 pt-6 border-t border-dr-border dark:border-dr-border-dark">
            <div class="flex flex-wrap items-center gap-4 text-sm text-dr-text-gray dark:text-dr-text-gray-light">
                <a href="https://github.com/piheta/seq.re"
                    class="transition-colors text-dr-text-gray dark:text-dr-text-gray-light hover:text-dr-text-heading dark:hover:text-dr-text-heading-dark"
                    target="_blank">GitHub</a>
                <a href="https://github.com/piheta/seq.re?tab=readme-ov-file#cli"
                    class="transition-colors text-dr-text-gray dark:text-dr-text-gray-light hover:text-dr-text-heading dark:hover:text-dr-text-heading-dark"
                    target="_blank">CLI</a>
                <a href="https://github.com/piheta/seq.re?tab=readme-ov-file#server-deployment"
                    class="transition-colors text-dr-text-gray dark:text-dr-text-gray-light hover:text-dr-text-heading dark:hover:text-dr-text-heading-dark"
                    target="_blank">Host Your Own</a>
                <a href="/privacy"
                    class="transition-colors text-dr-text-gray dark:text-dr-text-gray-light hover:text-dr-text-heading dark:hover:text-dr-text-heading-dark">Privacy
                    Policy</a>
                <a href="https://github.com/piheta/seq.re/blob/main/LICENSE"
                    class="transition-colors text-dr-text-gray dark:text-dr-text-gray-light hover:text-dr-text-heading dark:hover:text-dr-text-heading-dark"
                    target="_blank">License</a>
                {{if .ContactEmail}}
                <a href="mailto:{{.ContactEmail}}"
                    class="transition-colors text-dr-text-gray dark:text-dr-text-gray-light hover:text-dr-text-heading dark:hover:text-dr-text-heading-dark">Contact</a>
                {{end}}
                {{if .Version}}
                <span class="sm:ml-auto text-dr-text-muted dark:text-dr-text-muted-dark">{{.Version}}</span>
                {{end}}
            </div>
        </footer>
    </div>

    <script>
        // Dark mode toggle
        function toggleDarkMode() {
            const html = document.documentElement;
            const isDark = html.classList.toggle('dark');
            localStorage.setItem('darkMode', isDark ? 'dark' : 'light');

            // Toggle icons
            document.getElementById('sun-icon').classList.toggle('hidden');
            document.getElementById('moon-icon').classList.toggle('hidden');
        }

        // Initialize dark mode from localStorage
        (function () {
            const savedMode = localStorage.getItem('darkMode');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const shouldBeDark = savedMode === 'dark' || (!savedMode && prefersDark);

            if (shouldBeDark) {
                document.documentElement.classList.add('dark');
                document.getElementById('sun-icon').classList.remove('hidden');
                document.getElementById('moon-icon').classList.add('hidden');
            }
        })();

        function setActiveTab(button) {
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(btn => {
                btn.classList.remove('bg-dr-bg-subtle', 'dark:bg-dr-bg-subtle-dark', 'text-dr-text-heading', 'dark:text-dr-text-heading-dark', 'active-tab');
                btn.classList.add('text-dr-text-gray', 'dark:text-dr-text-gray-light');
            });

            button.classList.remove('text-dr-text-gray', 'dark:text-dr-text-gray-light');
            button.classList.add('bg-dr-bg-subtle', 'dark:bg-dr-bg-subtle-dark', 'text-dr-text-heading', 'dark:text-dr-text-heading-dark', 'active-tab');
        }

        function copyToClipboard(text, buttonId) {
            navigator.clipboard.writeText(text);
            const button = document.getElementById(buttonId);
            const originalHTML = button.innerHTML;
            button.innerHTML = '<svg class="w-5 h-5 text-dr-green dark:text-dr-green-dark" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>';
            setTimeout(() => {
                button.innerHTML = originalHTML;
            }, 2000);
        }
    </script>
</body>

</html>
